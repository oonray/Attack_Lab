kind: ConfigMap
metadata:
  name: opnevpn-script
apiVersion: v1
data:
  route-override.sh: |-
    #!/bin/sh
    VPN_GATEWAY=$(route -n | awk 'NR==3' | awk '{ print $2 }')
    ip route del 0.0.0.0/1 via $VPN_GATEWAY
    echo "Route Updated"

---
kind: ConfigMap
metadata:
  name: kali-insall-script
apiVersion: v1
data:
  install.sh: |-
    #!/bin/sh
    while true; do sleep 5; done

---
kind: ConfigMap
metadata:
  name: tmux
apiVersion: v1
data:
  .tmux.conf: |-
    set -g default-terminal "screen-256color"
    set -g mouse on

---
kind: ConfigMap
metadata:
  name: kali-sshd
apiVersion: v1
data:
  sshd_config: |-
    Include /etc/ssh/sshd_config.d/*.conf
    PermitRootLogin yes
    KbdInteractiveAuthentication no
    UsePAM yes

    AllowTcpForwarding yes
    X11Forwarding yes
    PermitTTY yes
    PrintMotd no

    AcceptEnv LANG LC_*

    Subsystem       sftp    /usr/lib/openssh/sftp-server

---
kind: ConfigMap
metadata:
  name: runner-config
apiVersion: v1
data:
  config.toml: |-
    concurrent = 1
    check_interval = 0
    shutdown_timeout = 0

    [session_server]
      session_timeout = 1800

    [[runners]]
      name = "kali-htb"
      url = "http://gitlab.dev:8181/"
      clone_url = "http://gitlab.dev:8181"
      id = 2
      token = "yZHJUj6saqzS9XXUy-5A"
      token_obtained_at = 2023-01-10T08:03:34Z
      token_expires_at = 0001-01-01T00:00:00Z
      executor = "shell"

      [runners.custom_build_dir]
      [runners.cache]
        MaxUploadedArchiveSize = 0
        [runners.cache.s3]
        [runners.cache.gcs]
        [runners.cache.azure]
